{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project/./src/utils/constants.js","webpack://mesto-project/./src/components/api.js","webpack://mesto-project/./src/components/card.js","webpack://mesto-project/./src/components/modal.js","webpack://mesto-project/./src/components/validation.js","webpack://mesto-project/./src/scripts/index.js"],"sourcesContent":["//переменные попапов\nconst popupEditProfile = document.querySelector(\".popup_type_edit\");\nconst popupAddCard = document.querySelector(\".popup_type_new-card\");\nconst popupZoomImage = document.querySelector(\".popup_type_image\");\nconst popupAvatarEdit = document.querySelector(\".popup-update-avatar\");\n\n//переменные кнопок\nconst popupProfileOpenButton = document.querySelector(\".profile__edit-button\");\nconst popupAddCardOpenButton = document.querySelector(\".profile__add-button\");\nconst popupProfileCloseButton = document.querySelector(\".button-close_type_edit\");\nconst popupAddCardCloseButton = document.querySelector(\".button-close_type_add\");\nconst popupZoomCloseButton = document.querySelector(\".button-close_type_zoom\");\nconst popupAvatarOpenButton = document.querySelector(\".profile__avatar-edit-button\");\nconst popupAvatarEditCloseButton = document.querySelector(\".button-close_type_avatar\");\n\n//переменные для формы редактирования профиля\nconst formEditElement = document.forms.editProfile;\nconst nameInput = formEditElement.elements.name;\nconst jobInput = formEditElement.elements.info;\n\n//переменные для редактирования профиля\nconst profileName = document.querySelector(\".profile__nickname\");\nconst userInfo = document.querySelector(\".profile__user-information\");\n\n//переменные для формы попапа добавления карточек\nconst formAddCardElement = document.forms.newCard;\nconst placeInput = formAddCardElement.elements.cardTitle;\nconst linkInput = formAddCardElement.elements.link;\n\n//переменные для попапа добавления карточек\nconst cardContainer = document.querySelector(\".places__list\");\n\n//переменные для редактирования аватара\nconst avatarImage = document.querySelector(\".profile__image\");\n\n//переменные для формы редактирования аватара\nconst formEditAvatarElement = document.forms.updateAvatar;\nconst avatarLinkInput = formEditAvatarElement.elements.url;\n\nconst configForm = {\n    formSelector: \".popup__form\",\n    inputSelector: \".popup__input\",\n    submitButtonSelector: \".popup__button\",\n    inputErrorClass: \"popup__input_invalid\",\n    buttonInactiveClass: \"popup__button_disabled\",\n    errorClass: \".error\",\n  };\n\n\nexport { popupEditProfile, popupAddCard, popupZoomImage, popupAvatarEdit, popupProfileOpenButton,\npopupAddCardOpenButton, popupProfileCloseButton, popupAddCardCloseButton, popupZoomCloseButton,\npopupAvatarOpenButton, popupAvatarEditCloseButton, formEditElement, nameInput, jobInput, profileName,\nuserInfo, formAddCardElement, placeInput, linkInput, cardContainer, avatarImage, formEditAvatarElement,\navatarLinkInput, configForm };","const config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-2\",\n  headers: {\n    authorization: \"7b51863c-93c2-411f-a61e-7d6b9806910b\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\n//Токен: 7b51863c-93c2-411f-a61e-7d6b9806910b\n//Идентификатор группы: wff-cohort-2\n\nconst checkError = (response) => {\n  if (response.ok) {\n    return response.json();\n  } else {\n    // если ошибка, отклоняем промис\n    return Promise.reject(`Ошибка: ${response.status} ${response.statusText}`);\n  }\n};\n\n//запрос информации пользователя\nexport const getUserInformation = () => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n    method: \"GET\",\n  }).then(checkError);\n};\n\n//запрос карточек\nexport const getCards = () => {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n    method: \"GET\",\n  }).then(checkError);\n};\n\n//редактирование информации пользователя\nexport const editUserInformation = ({ name, job }) => {\n  //отредактировать информацию // в name и about попали мои отредактированные данные\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n    method: \"PATCH\",\n    body: JSON.stringify({\n      //берет мой обьект  превращает в строку\n      name: name, //сюда попадают мои отредактированные данные\n      about: job,\n    }),\n  }).then(checkError);\n};\n\nexport const addCard = ({ name, link }) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n    method: \"POST\",\n    body: JSON.stringify({\n      name: name,\n      link: link,\n    }),\n  }).then(checkError);\n};\n\nexport const deleteCard = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\n    headers: config.headers,\n    method: \"DELETE\",\n  }).then(checkError);\n};\n\nexport const putLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    headers: config.headers,\n    method: \"PUT\",\n  }).then(checkError);\n};\n\nexport const deleteLike = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    headers: config.headers,\n    method: \"DELETE\",\n  }).then(checkError);\n};\n\nexport const editAvatar = ({ avatar }) => {\n  //отредактировать информацию // в name и about попали мои отредактированные данные\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    headers: config.headers,\n    method: \"PATCH\",\n    body: JSON.stringify({\n      //берет мой обьект  превращает в строку\n      avatar: avatar,\n    }),\n  }).then(checkError);\n};\n\nexport const testAvatarUrl = ({ avatar }) => {\n  return fetch(avatar, {\n    method: \"HEAD\",\n  })\n    .then(checkError)\n    .then((res) => {\n      return res.headers.get(\"content-type\");\n    });\n};\n","import { deleteCard, putLike, deleteLike } from \"./api.js\";\nfunction createCard(\n  item,\n  handleDeleteCard,\n  handleZoomImage,\n  myId\n) {\n  const cardTemplate = document.querySelector(\"#card-template\").content;\n  const card = cardTemplate.querySelector(\".card\").cloneNode(true);\n  const cardImage = card.querySelector(\".card__image\");\n  const cardTitle = card.querySelector(\".card__title\");\n  const deleteCardButton = card.querySelector(\".card__delete-button\");\n  const likeCardButton = card.querySelector(\".card__like-button\");\n  const likeCounter = card.querySelector(\".card__like-counter\");\n  cardImage.src = item.link;\n  cardImage.alt = item.name;\n  cardTitle.textContent = item.name;\n  likeCounter.textContent = item.likes.length;\n  const cardId = item._id;\n  if (isLikedByMe(item, myId)) {\n    likeCardButton.classList.add(\"card__like-button_is-active\");\n  }\n  if (myId !== item.owner._id) {\n    deleteCardButton.remove();\n  } else {\n    deleteCardButton.addEventListener(\"click\", () => {\n      handleDeleteCard(deleteCardButton, \".card\", cardId);\n    });\n  }\n\n  likeCardButton.addEventListener(\"click\", () => {\n    const likeMethod = likeCardButton.classList.contains(\n      \"card__like-button_is-active\"\n    )\n      ? deleteLike\n      : putLike;\n    likeMethod(cardId)\n      .then((cardData) => {\n        likeCardButton.classList.toggle(\"card__like-button_is-active\");\n        likeCounter.textContent = cardData.likes.length;\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  });\n  cardImage.addEventListener(\"click\", handleZoomImage);\n\n  return card;\n}\n\nfunction handleDeleteCard(button, classname, id) {\n  const cardParent = button.closest(classname);\n  deleteCard(id)\n    .then((res) => console.log(res))\n    .catch((error) => {\n      console.log(error);\n    });\n  cardParent.remove();\n}\n\nfunction isLikedByMe(cardData, ownerId) {\n  return cardData.likes.some((like) => {\n    return like._id == ownerId;\n  });\n}\n\nexport { createCard, handleDeleteCard };\n","//открыть модальное окно\nfunction openPopup(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closeByEsc);\n  popup.addEventListener(\"mousedown\", closeByOverlayClick);\n}\n\n//закрыть модальное окно\nfunction closePopup(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closeByEsc);\n  popup.removeEventListener(\"mousedown\", closeByOverlayClick);\n}\n\n//закрыть модальное окно нажатием на ESC\nfunction closeByEsc(evt) {\n  if (evt.key === \"Escape\") {\n    const popup = document.querySelector(\".popup_is-opened\");\n    closePopup(popup);\n  }\n}\n\n//закрыть модальное окно нажатием на фон\nfunction closeByOverlayClick(evt) {\n  if (evt.target === evt.currentTarget) {\n    closePopup(evt.currentTarget);\n  }\n}\n\nexport { openPopup, closePopup };","//покажи ошибку\nfunction showError(inputElement, errorElement, config) {\n  inputElement.classList.add(config.inputErrorClass);\n  errorElement.textContent = inputElement.validationMessage;\n}\n\n//спрячь ошибку\nfunction hideError(inputElement, errorElement, config) {\n  inputElement.classList.remove(config.inputErrorClass);\n  errorElement.textContent = \"\";\n}\n\n//проверим валидность\nfunction checkInputValidity(inputElement, formElement, config) {\n  const isInputMatchPattern = inputElement.validity.patternMismatch;\n  const errorElement = formElement.querySelector(`#${inputElement.name}-error`);\n  if (isInputMatchPattern) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n  const isInputValid = inputElement.validity.valid;\n  if (isInputValid) {\n    hideError(inputElement, errorElement, config);\n  } else {\n    showError(inputElement, errorElement, config);\n  }\n}\n\nfunction makeButtonUnblocked(buttonElement, config) {\n  buttonElement.disabled = false;\n  buttonElement.classList.remove(config.buttonInactiveClass);\n}\n\nfunction makeButtonBlocked(buttonElement, config) {\n  buttonElement.disabled = true;\n  buttonElement.classList.add(config.buttonInactiveClass);\n}\n\n//блокировка кнопки\nfunction toggleButton(buttonElement, isActive, config) {\n  if (isActive) {\n    makeButtonUnblocked(buttonElement, config);\n  } else {\n    makeButtonBlocked(buttonElement, config);\n  }\n}\n\n//Вешаем обработчик события submit\nfunction setEventListeners(formElement, config) {\n  const inputList = formElement.querySelectorAll(config.inputSelector);\n  const submitButtonElement = formElement.querySelector(\n    config.submitButtonSelector\n  );\n  toggleButton(submitButtonElement, formElement.checkValidity(), config);\n\n  inputList.forEach(function (inputElement) {\n    inputElement.addEventListener(\"input\", function () {\n      toggleButton(submitButtonElement, formElement.checkValidity(), config);\n      checkInputValidity(inputElement, formElement, config);\n    });\n  });\n  formElement.addEventListener(\"submit\", function (evt) {\n    evt.preventDefault();\n  });\n}\n\n//Находим все формы и перебираем их\nexport function enableValidation(config) {\n  const formList = document.querySelectorAll(config.formSelector);\n  formList.forEach(function (formElement) {\n    setEventListeners(formElement, config);\n  });\n}\n\n//очищаем поля ошибок и  блокируем кнопку\nexport function clearValidation(formElement, config) {\n  const inputList = formElement.querySelectorAll(config.inputSelector);\n  const submitButtonElement = formElement.querySelector(\n    config.submitButtonSelector\n  );\n  inputList.forEach((inputElement) => {\n    const errorElement = formElement.querySelector(\n      `#${inputElement.name}-error`\n    );\n    hideError(inputElement, errorElement, config);\n  });\n  toggleButton(submitButtonElement, false, config);\n}\n\n","import \"../pages/index.css\";\nimport { popupEditProfile, popupAddCard, popupZoomImage, popupAvatarEdit, popupProfileOpenButton,\n  popupAddCardOpenButton, popupProfileCloseButton, popupAddCardCloseButton, popupZoomCloseButton,\n  popupAvatarOpenButton, popupAvatarEditCloseButton, formEditElement, nameInput, jobInput, profileName,\n  userInfo, formAddCardElement, placeInput, linkInput, cardContainer, avatarImage, formEditAvatarElement,\n  avatarLinkInput, configForm } from \"../utils/constants.js\";\nimport {\n  createCard,\n  handleDeleteCard,\n} from \"../components/card.js\";\nimport { openPopup, closePopup } from \"../components/modal.js\";\nimport {\n  enableValidation,\n  clearValidation\n} from \"../components/validation\";\nimport {\n  getUserInformation,\n  getCards,\n  editUserInformation,\n  addCard,\n  editAvatar,\n  testAvatarUrl,\n} from \"../components/api\";\n\n\n\n//функция для попапа редактирования профиля\nfunction handleEditFormSubmit(evt) {\n  evt.preventDefault();\n  const submitButtonElement = document.querySelector(\".popup__button-edit\");\n  const name = nameInput.value;\n  const job = jobInput.value;\n  profileName.textContent = name;\n  userInfo.textContent = job;\n  renderLoading(true, submitButtonElement);\n  editUserInformation({ name, job })\n    .then((data) => {})\n    .catch((error) => {\n      console.log(error);\n    })\n    .finally(() => {\n      renderLoading(false, submitButtonElement);\n    });\n  closePopup(popupEditProfile);\n}\n\n\n//функция для попапа обновления аватара\nfunction handleEditAvatarSubmit(evt) {\n  evt.preventDefault();\n  const submitButtonElement = document.querySelector(\".popup__button-avatar\");\n  const avatar = avatarLinkInput.value;\n  renderLoading(true, submitButtonElement);\n  testAvatarUrl({ avatar })\n    .then((data) => {\n      if(data == 'image/jpeg'|| data == 'image/png' || data == 'image/gif') {\n        console.log(data + \" - правильный формат\");\n      } else {\n       return Promise.reject(\"Ошибка\");\n      };\n    })\n    .then(() => { avatarImage.src = avatar; \n      return editAvatar({ avatar }); })\n    .then((data) => {})\n    .catch((error) => {\n      if (error == \"Ошибка\") {\n        console.log(\"Некорректный формат изображения, используйте jpg, png или gif\"); // выведем ошибку в консоль\n      } else {\n        console.log(error);\n      }\n    })\n    .finally(() => {\n      renderLoading(false, submitButtonElement);\n    });\n  \n\n  closePopup(popupAvatarEdit);\n}\n\n//функция рендера карточки на страницу\nfunction renderCard(item) {\n  const newCard = createCard(\n    item,\n    handleDeleteCard,\n    handleZoomImage,\n    myId\n  );\n  cardContainer.prepend(newCard);\n}\n\n//добавляем свою карточку\nfunction addMyCard(evt) {\n  evt.preventDefault();\n  const submitButtonElement = document.querySelector(\".popup__button-add\");\n  const name = placeInput.value;\n  const link = linkInput.value;\n  renderLoading(true, submitButtonElement);\n  addCard({ name, link })\n    .then((data) => {\n      renderCard(data);\n      closePopup(popupAddCard);\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n    .finally(() => {\n      renderLoading(false, submitButtonElement);\n    });\n  evt.target.reset();\n}\n\n//функция увеличения изображения по клику\nfunction handleZoomImage(evt) {\n  openPopup(popupZoomImage);\n  const imageZoomed = popupZoomImage.querySelector(\".popup__image\");\n  const imageCaption = popupZoomImage.querySelector(\".popup__caption\");\n  const img = evt.target;\n  imageZoomed.src = img.src;\n  imageZoomed.alt = img.alt;\n  imageCaption.textContent = imageZoomed.alt;\n}\n\n//функция заполнения данными профиля из инпутов\nfunction setUserInfo() {\n  const name = profileName.textContent;\n  const job = userInfo.textContent;\n  nameInput.value = name;\n  jobInput.value = job;\n}\n\n//включаем валидацию\nenableValidation(configForm);\n\n\n// API\nconst pageData = [getUserInformation(), getCards()];\n\nexport let myId;\n //мой айди 0fd2e9b846773c97126418ae\n\nPromise.all(pageData)\n  .then(([userInformation, cardMassive]) => {\n    myId = userInformation._id;\n    cardMassive.reverse().forEach((item) => {\n      renderCard(item);\n    });\n    profileName.textContent = userInformation.name;\n    userInfo.textContent = userInformation.about;\n    avatarImage.src = userInformation.avatar;\n  })\n  .catch((error) => {\n    console.log(error);\n  });\n\n  //функция смены надписи кнопки при сохранении\nfunction renderLoading(isLoading, button) { \n  button.textContent = isLoading ? \"Сохранение...\" : \"Сохранить\";\n}\n\n//слушатели-обработчики\n//слушатели для попапа редактирования\npopupProfileOpenButton.addEventListener(\"click\", () => {\n  openPopup(popupEditProfile);\n  clearValidation(formEditElement, configForm);\n  setUserInfo();\n});\n\npopupProfileCloseButton.addEventListener(\"click\", () => {\n  closePopup(popupEditProfile);\n});\n\nformEditElement.addEventListener(\"submit\", handleEditFormSubmit);\n\n//слушатели для попапа карточки\npopupAddCardOpenButton.addEventListener(\"click\", () => {\n  openPopup(popupAddCard);\n  clearValidation(formAddCardElement, configForm);\n});\n\npopupAddCardCloseButton.addEventListener(\"click\", () => {\n  closePopup(popupAddCard);\n});\n\nformAddCardElement.addEventListener(\"submit\", addMyCard);\n\n//слушатели для попапа изображения\npopupZoomCloseButton.addEventListener(\"click\", () => {\n  closePopup(popupZoomImage);\n});\n\n//слушатели для попапа аватара\npopupAvatarOpenButton.addEventListener(\"click\", () => {\n  openPopup(popupAvatarEdit);\n  clearValidation(formEditAvatarElement, configForm);\n\n});\n\npopupAvatarEditCloseButton.addEventListener(\"click\", () => {\n  closePopup(popupAvatarEdit);\n});\n\nformEditAvatarElement.addEventListener(\"submit\", handleEditAvatarSubmit);"],"names":["popupEditProfile","document","querySelector","popupAddCard","popupZoomImage","popupAvatarEdit","popupProfileOpenButton","popupAddCardOpenButton","popupProfileCloseButton","popupAddCardCloseButton","popupZoomCloseButton","popupAvatarOpenButton","popupAvatarEditCloseButton","formEditElement","forms","editProfile","nameInput","elements","name","jobInput","info","profileName","userInfo","formAddCardElement","newCard","placeInput","cardTitle","linkInput","link","cardContainer","avatarImage","formEditAvatarElement","updateAvatar","avatarLinkInput","url","configForm","formSelector","inputSelector","submitButtonSelector","inputErrorClass","buttonInactiveClass","errorClass","config","baseUrl","headers","authorization","checkError","response","ok","json","Promise","reject","concat","status","statusText","deleteCard","cardId","fetch","method","then","putLike","deleteLike","handleDeleteCard","button","classname","id","cardParent","closest","res","console","log","catch","error","remove","openPopup","popup","classList","add","addEventListener","closeByEsc","closeByOverlayClick","closePopup","removeEventListener","evt","key","target","currentTarget","hideError","inputElement","errorElement","textContent","toggleButton","buttonElement","isActive","disabled","makeButtonUnblocked","makeButtonBlocked","clearValidation","formElement","inputList","querySelectorAll","submitButtonElement","forEach","renderCard","item","handleZoomImage","myId","card","content","cloneNode","cardImage","deleteCardButton","likeCardButton","likeCounter","src","alt","likes","length","ownerId","_id","some","like","owner","contains","cardData","toggle","createCard","prepend","imageZoomed","imageCaption","img","checkValidity","isInputMatchPattern","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","validationMessage","showError","checkInputValidity","preventDefault","setEventListeners","enableValidation","pageData","renderLoading","isLoading","all","_ref","_ref2","userInformation","cardMassive","reverse","about","avatar","job","value","body","JSON","stringify","editUserInformation","data","finally","addCard","reset","_ref4","get","_ref3","editAvatar"],"sourceRoot":""}